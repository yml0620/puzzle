{"remainingRequest":"C:\\Users\\yml\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yml\\Desktop\\vue-puzzle\\Puzzle.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yml\\Desktop\\vue-puzzle\\Puzzle.vue","mtime":1595045728738},{"path":"C:\\Users\\yml\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yml\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yml\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgcHJvcHM6ew0KICAgICAgICB3aWR0aDp7DQogICAgICAgICAgICB0eXBlOiBOdW1iZXIsDQogICAgICAgICAgICBkZWZhdWx0OjUwMA0KICAgICAgICB9LA0KICAgICAgICBoZWlnaHQ6ew0KICAgICAgICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgICAgICAgZGVmYXVsdDo1MDANCiAgICAgICAgfSwNCiAgICAgICAgcm93OnsNCiAgICAgICAgICAgIHR5cGU6TnVtYmVyLA0KICAgICAgICAgICAgZGVmYXVsdDozDQogICAgICAgIH0sDQogICAgICAgIGNvbDp7DQogICAgICAgICAgICB0eXBlOk51bWJlciwNCiAgICAgICAgICAgIGRlZmF1bHQ6Mw0KICAgICAgICB9LA0KICAgICAgICBpbWc6ew0KICAgICAgICAgICAgdHlwZTpTdHJpbmcsDQogICAgICAgICAgICByZXF1aXJlZDp0cnVlDQogICAgICAgIH0NCiAgICB9LA0KICAgIGNvbXB1dGVkOnsNCiAgICAgICAgYmxvY2tXaWR0aCAoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy53aWR0aCAvIHRoaXMuY29sOw0KICAgICAgICB9LA0KICAgICAgICBibG9ja0hlaWdodCAoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQgLyB0aGlzLnJvdzsNCiAgICAgICAgfSwNCiAgICAgICAgY29ycmVjdFBvaW50cygpew0KICAgICAgICAgICAgY29uc3QgeyByb3csY29sLGJsb2NrV2lkdGgsYmxvY2tIZWlnaHQgfSA9IHRoaXM7DQogICAgICAgICAgICBjb25zdCBhcnIgPSBbXTsNCiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7aSA8IHJvdzsgaSsrKXsNCiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwO2ogPCBjb2w7IGorKyl7DQogICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHg6IGogKiAgYmxvY2tXaWR0aCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHk6IGkgKiBibG9ja0hlaWdodCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIE1hdGgucmFuZG9tKCkgKiAxMDANCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYXJyOw0KICAgICAgICB9LA0KICAgICAgICBibG9ja1BvaW50cyAoKSB7DQogICAgICAgICAgIGNvbnN0IHBvaW50cyA9IHRoaXMuY29ycmVjdFBvaW50czsNCiAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aDsNCiAgICAgICAgICAgY29uc3QgbGFzdEVsZSA9IHBvaW50c1tsZW5ndGggLSAxXTsNCiAgICAgICAgICAgY29uc3QgbmV3QXJyID0gWy4uLnBvaW50c107DQogICAgICAgICAgIG5ld0Fyci5sZW5ndGggPSBsZW5ndGggLTE7DQogICAgICAgICAgIG5ld0Fyci5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpOyANCiAgICAgICAgICAgbmV3QXJyLnB1c2gobGFzdEVsZSk7DQogICAgICAgICAgIHJldHVybiBuZXdBcnI7DQogICAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6ew0KICAgICAgICBoYW5kbGVDbGljayhlKXsNCiAgICAgICAgICAgIGNvbnN0IGJsb2NrRG9tID0gZS50YXJnZXQ7DQogICAgICAgICAgICBjb25zdCAgZW1wdHlEb20gPSB0aGlzLiRyZWZzLmVtcHR5WzBdOw0KICAgICAgICAgICAgaWYoIXRoaXMuaXNBZGphY2VudChibG9ja0RvbSxlbXB0eURvbSkpew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IHsgbGVmdCx0b3AgfSA9IGJsb2NrRG9tLnN0eWxlOw0KICAgICAgICAgICAgYmxvY2tEb20uc3R5bGUubGVmdCA9IGVtcHR5RG9tLnN0eWxlLmxlZnQ7DQogICAgICAgICAgICBibG9ja0RvbS5zdHlsZS50b3AgPSBlbXB0eURvbS5zdHlsZS50b3A7DQogICAgICAgICAgICBlbXB0eURvbS5zdHlsZS5sZWZ0ID0gbGVmdDsNCiAgICAgICAgICAgIGVtcHR5RG9tLnN0eWxlLnRvcCA9IHRvcDsNCiAgICAgICAgICAgIGNvbnN0IHdpbkZsYWcgPSB0aGlzLmNoZWNrV2luKCk7DQogICAgICAgICAgICBpZih3aW5GbGFnKXsNCiAgICAgICAgICAgICAgICB0aGlzLndpbkdhbWUoZW1wdHlEb20pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBpc0FkamFjZW50KGJsb2NrRG9tLGVtcHR5RG9tKXsNCiAgICAgICAgICAgIGNvbnN0IHsgbGVmdDpkb21MZWZ0LHRvcDpkb21Ub3Asd2lkdGgsaGVpZ2h0IH0gPSBibG9ja0RvbS5zdHlsZTsNCiAgICAgICAgICAgIGNvbnN0IHsgbGVmdDplbXB0eUxlZnQsdG9wOmVtcHR5VG9wIH0gPSBlbXB0eURvbS5zdHlsZTsNCiAgICAgICAgICAgIGNvbnN0IHhEaXMgPSBNYXRoLmZsb29yKE1hdGguYWJzKHBhcnNlRmxvYXQoZG9tTGVmdCkgLSBwYXJzZUZsb2F0KGVtcHR5TGVmdCkpKTsNCiAgICAgICAgICAgIGNvbnN0IHlEaXMgPSBNYXRoLmZsb29yKE1hdGguYWJzKHBhcnNlRmxvYXQoZG9tVG9wKSAtIHBhcnNlRmxvYXQoZW1wdHlUb3ApKSk7DQogICAgICAgICAgICBjb25zdCBmbGFnID0gKGRvbUxlZnQgPT09IGVtcHR5TGVmdCAmJiB5RGlzID09PSBwYXJzZUludChoZWlnaHQpKQ0KICAgICAgICAgICAgICAgICAgICAgICB8fChkb21Ub3AgPT09IGVtcHR5VG9wICYmIHhEaXMgPT09IHBhcnNlSW50KHdpZHRoKSk7DQogICAgICAgICAgICByZXR1cm4gZmxhZzsNCiAgICAgICAgfSwNCiAgICAgICAgY2hlY2tXaW4oKXsNCiAgICAgICAgICAgIGNvbnN0IGJsb2NrRG9tQXJyID0gdGhpcy4kcmVmcy5ibG9jazsNCiAgICAgICAgICAgIHJldHVybiBibG9ja0RvbUFyci5ldmVyeShkb20gPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHsgbGVmdDpkb21MZWZ0LHRvcDpkb21Ub3AgfSA9IGRvbS5zdHlsZTsNCiAgICAgICAgICAgICAgICBjb25zdCB7IGNvcnJlY3R4OmNvcnJlY3RYLGNvcnJlY3R5OmNvcnJlY3RZfSA9IGRvbS5kYXRhc2V0Ow0KICAgICAgICAgICAgICAgIGNvbnN0IGZsYWcgPSBwYXJzZUludChkb21MZWZ0KSA9PT0gcGFyc2VJbnQoY29ycmVjdFgpICYmIHBhcnNlSW50KGRvbVRvcCkgPT09IHBhcnNlSW50KGNvcnJlY3RZKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmxhZzsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIHdpbkdhbWUoZW1wdHlEb20pew0KICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+ew0KICAgICAgICAgICAgICAgIGFsZXJ0KCfmga3llpzkvaDotaLkuoYnKTsNCiAgICAgICAgICAgICAgICBlbXB0eURvbS5zdHlsZS5vcGFjaXR5ID0gMTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ29Ub05leHRMZXZlbCgpOw0KICAgICAgICAgICAgICAgIH0sMzAwKQ0KICAgICAgICAgICAgfSwzMDApDQogICAgICAgIH0sDQogICAgICAgIGdvVG9OZXh0TGV2ZWwoKXsNCiAgICAgICAgICAgY29uc3QgYW5zd2VyRmxhZyA9IHdpbmRvdy5jb25maXJtKCfopoHnu6fnu63kuIvkuIDlhbPlkJfvvJ8nKTsNCiAgICAgICAgICAgaWYoYW5zd2VyRmxhZyl7DQogICAgICAgICAgICAgICB0aGlzLiRlbWl0KCduZXh0Jyk7DQogICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["Puzzle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Puzzle.vue","sourceRoot":".","sourcesContent":["<template>\r\n    <div class=\"puzzle\" :style=\"{width:width+'px',height:height+'px'}\">\r\n        <div\r\n            class=\"puzzle__block\"\r\n            v-for=\"(item,index) in blockPoints\"\r\n            :key=\"item.id\"\r\n            :style=\"{\r\n                width:blockWidth + 'px',\r\n                height:blockHeight + 'px',\r\n                left:item.x +'px',\r\n                top:item.y + 'px',\r\n                backgroundImage:`url(${img})`,\r\n                backgroundPosition:`-${correctPoints[index].x}px -${correctPoints[index].y}px`,\r\n                opacity:index === blockPoints.length - 1 && 0\r\n            }\"\r\n            @click=\"handleClick\"\r\n            :ref=\"index === blockPoints.length - 1 ? 'empty' : 'block'\"\r\n            :data-correctX=\"correctPoints[index].x\"\r\n            :data-correctY=\"correctPoints[index].y\"\r\n        >\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    props:{\r\n        width:{\r\n            type: Number,\r\n            default:500\r\n        },\r\n        height:{\r\n            type: Number,\r\n            default:500\r\n        },\r\n        row:{\r\n            type:Number,\r\n            default:3\r\n        },\r\n        col:{\r\n            type:Number,\r\n            default:3\r\n        },\r\n        img:{\r\n            type:String,\r\n            required:true\r\n        }\r\n    },\r\n    computed:{\r\n        blockWidth () {\r\n            return this.width / this.col;\r\n        },\r\n        blockHeight () {\r\n            return this.height / this.row;\r\n        },\r\n        correctPoints(){\r\n            const { row,col,blockWidth,blockHeight } = this;\r\n            const arr = [];\r\n            for(let i = 0;i < row; i++){\r\n                for(let j = 0;j < col; j++){\r\n                    arr.push({\r\n                        x: j *  blockWidth,\r\n                        y: i * blockHeight,\r\n                        id: new Date().getTime() + Math.random() * 100\r\n                    })\r\n                }\r\n            }\r\n            return arr;\r\n        },\r\n        blockPoints () {\r\n           const points = this.correctPoints;\r\n           const length = points.length;\r\n           const lastEle = points[length - 1];\r\n           const newArr = [...points];\r\n           newArr.length = length -1;\r\n           newArr.sort(() => Math.random() - 0.5); \r\n           newArr.push(lastEle);\r\n           return newArr;\r\n        }\r\n    },\r\n    methods:{\r\n        handleClick(e){\r\n            const blockDom = e.target;\r\n            const  emptyDom = this.$refs.empty[0];\r\n            if(!this.isAdjacent(blockDom,emptyDom)){\r\n                return;\r\n            }\r\n            const { left,top } = blockDom.style;\r\n            blockDom.style.left = emptyDom.style.left;\r\n            blockDom.style.top = emptyDom.style.top;\r\n            emptyDom.style.left = left;\r\n            emptyDom.style.top = top;\r\n            const winFlag = this.checkWin();\r\n            if(winFlag){\r\n                this.winGame(emptyDom);\r\n            }\r\n        },\r\n        isAdjacent(blockDom,emptyDom){\r\n            const { left:domLeft,top:domTop,width,height } = blockDom.style;\r\n            const { left:emptyLeft,top:emptyTop } = emptyDom.style;\r\n            const xDis = Math.floor(Math.abs(parseFloat(domLeft) - parseFloat(emptyLeft)));\r\n            const yDis = Math.floor(Math.abs(parseFloat(domTop) - parseFloat(emptyTop)));\r\n            const flag = (domLeft === emptyLeft && yDis === parseInt(height))\r\n                       ||(domTop === emptyTop && xDis === parseInt(width));\r\n            return flag;\r\n        },\r\n        checkWin(){\r\n            const blockDomArr = this.$refs.block;\r\n            return blockDomArr.every(dom => {\r\n                const { left:domLeft,top:domTop } = dom.style;\r\n                const { correctx:correctX,correcty:correctY} = dom.dataset;\r\n                const flag = parseInt(domLeft) === parseInt(correctX) && parseInt(domTop) === parseInt(correctY);\r\n                return flag;\r\n            })\r\n        },\r\n        winGame(emptyDom){\r\n            setTimeout(()=>{\r\n                alert('恭喜你赢了');\r\n                emptyDom.style.opacity = 1;\r\n                setTimeout(()=>{\r\n                    this.goToNextLevel();\r\n                },300)\r\n            },300)\r\n        },\r\n        goToNextLevel(){\r\n           const answerFlag = window.confirm('要继续下一关吗？');\r\n           if(answerFlag){\r\n               this.$emit('next');\r\n           }\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    .puzzle{\r\n        position: relative;\r\n        border: 2px solid #ccc;\r\n    }\r\n    .puzzle__block{\r\n        box-sizing: border-box;\r\n        position: absolute;\r\n        border: 1px solid #fff;\r\n        transition: all .3s;\r\n    }\r\n</style>"]}]}